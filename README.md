# TexasHoldem

TexasHoldem — это приложение на базе Windows Forms, реализующее классическую игру в покер Техасский Холдем. Проект разработан на C# с использованием .NET Framework и предоставляет интерактивный интерфейс для оффлайн игры с пятью(или менее) ботами. Приложение включает визуальное отображение карт, анимации победы, звуковое сопровождение и логику оценки покерных комбинаций.

## Основные возможности

- **Игровой процесс**: Поддержка до 6 игроков (пользователь и 5 ботов с предопределёнными именами: Patrick, Jason, Dwayne, John, Ryan).
- **Покерные комбинации**: Автоматическая оценка комбинаций (от старшей карты до роял флеша) с использованием класса `PokerWinnerDeterminer`.
- **Визуальный интерфейс**: Отображение карт, депозитов игроков, текущей ставки и банка с использованием изображений в папке `Media`.
- **Анимации и звук**: Уникальные видео- и аудиоанимации победы для каждого игрока, реализованные через `WebView2` и `NAudio`.
- **Игровые состояния**: Логика игры разделена на состояния (Preflop, Flop, Turn, River, Showdown), реализованные с использованием паттерна "Состояние".
- **Настраиваемый интерфейс**: Конфигурация интерфейса через класс `UILayoutConfig` для гибкой настройки позиций элементов.

## Требования

Для сборки и запуска проекта необходимы следующие компоненты:

- **Операционная система**: Windows 10 или выше.
- **Среда разработки**: Visual Studio 2022 (или новее) с установленной поддержкой .NET Framework (версия 4.8 или выше).
- **Зависимости**:
  - `Microsoft.Web.WebView2` для отображения анимаций победы.
  - `NAudio` для воспроизведения звуковых эффектов.
- **Медиафайлы**: Изображения карт, иконки действий, видео и аудио анимаций победы, расположенные в папке `Media`.

## Установка

1. **Клонирование репозитория**:
   ```bash
   git clone https://github.com/DmitryRudnev/TexasHoldem.git
   ```

2. **Открытие проекта**:
   - Откройте файл решения `TexasHoldem.sln` в Visual Studio.

3. **Установка зависимостей**:
   - Убедитесь, что пакеты NuGet `Microsoft.Web.WebView2` и `NAudio` установлены. Если они отсутствуют, установите их через менеджер пакетов NuGet:
     ```bash
     Install-Package Microsoft.Web.WebView2
     Install-Package NAudio
     ```

4. **Настройка медиафайлов**:
   - Убедитесь, что папка `Media` содержит следующие подкатегории:
     - `Card Images`: Изображения карт (например, `2_of_hearts.png`, `back.png`).
     - `Table Images`: Фоновое изображение стола (`table3.png`) и иконка приложения (`poker.ico`).
     - `Action Icons`: Иконки действий (`bet.png`, `call.png`, `fold.png`).
     - `Winner Animations`: Подпапки `Gifs`, `Audios`, `Videos` с соответствующими файлами для каждого игрока (например, `McLovin.webm`, `McLovin.WAV`).
   - Если медиафайлы отсутствуют, создайте их или замените заглушками, указав пути в `UILayoutConfig.cs`.

5. **Сборка и запуск**:
   - Выберите конфигурацию **Debug** или **Release** в Visual Studio.
   - Нажмите **F5** для запуска приложения.

## Структура проекта

Проект организован с использованием объектно-ориентированного подхода и паттернов проектирования. Основные компоненты:

- **GameForm.cs**: Основной класс формы, отвечающий за отображение интерфейса, обработку пользовательских действий и интеграцию с `GameManager`.
- **GameManager.cs**: Синглтон, управляющий логикой игры, включая раздачу карт, обработку ходов и переход между состояниями.
- **IGameState.cs** и связанные классы (`PreflopState.cs`, `FlopState.cs`, `TurnState.cs`, `RiverState.cs`, `ShowdownState.cs`): Реализация паттерна "Состояние" для управления фазами игры.
- **Player.cs**, **HumanPlayer.cs**, **BotPlayer.cs**: Классы для представления игроков. Боты принимают решения на основе случайной стратегии.
- **Card.cs**: Класс для представления карт с поддержкой мастей и рангов.
- **PokerWinnerDeterminer.cs** и **PokerHand.cs**: Логика оценки покерных комбинаций и определения победителя.
- **UILayoutConfig.cs**: Конфигурация расположения элементов интерфейса и путей к медиафайлам.
- **UIController.cs**: Реализация паттерна "Наблюдатель" для обновления интерфейса в ответ на изменения состояния игры.

## Использование

1. **Запуск игры**:
   - После запуска приложения нажмите кнопку **Start Game** для начала новой игры.
   - Игрок (человек) отображается под именем "McLovin" в нижней части стола.
2. **Игровой процесс**:
   - Игра проходит через этапы: Preflop, Flop, Turn, River, Showdown.
   - Пользователь может выбрать **Call** или **Fold** в ответ на текущую ставку.
   - Боты автоматически делают ставки или случайные действия (Call/Fold).
3. **Завершение раунда**:
   - На этапе Showdown отображаются карты активных игроков, их комбинации и победитель.
   - Победителю начисляется банк, сопровождаемый видео- и аудиоанимацией.
   - Нажмите **Start Game** для начала нового раунда.

## Разработка и внесение изменений

Для разработчиков, желающих расширить функциональность проекта:

1. **Добавление новых игроков**:
   - Используйте `PlayerFactory.cs` для создания новых игроков (человеческих или ботов).
   - Обновите `GameForm.cs` для отображения новых игроков и их карт.

2. **Кастомизация интерфейса**:
   - Измените константы в `UILayoutConfig.cs` для настройки позиций карт, меток и кнопок.
   - Добавьте новые медиафайлы в папку `Media` и обновите пути в `UILayoutConfig.cs`.

3. **Улучшение логики ботов**:
   - Модифицируйте метод `MakeMove` в `BotPlayer.cs` для реализации более сложных стратегий (например, на основе силы руки или статистики).

4. **Ветвление и контроль версий**:
   - Создавайте ветки для новых функций:
     ```bash
     git branch feature/new-feature
     git checkout feature/new-feature
     ```
   - Используйте запросы на включение (pull requests) для ревью кода.

5. **Обработка больших файлов**:
   - Если медиафайлы (например, `.png`, `.webm`) занимают много места, настройте Git LFS:
     ```bash
     git lfs install
     git lfs track "*.png" "*.webm"
     git add .gitattributes
     ```

## Известные ограничения

- **Производительность**: Анимации победы с использованием `WebView2` могут быть требовательны к ресурсам на старых системах.
- **Логика ботов**: Боты используют простую случайную стратегию, что ограничивает сложность игры.
- **Медиафайлы**: Отсутствие медиафайлов в репозитории требует их ручного добавления или замены.

## Контакты

Для вопросов, предложений или сообщений об ошибках создайте issue в репозитории или свяжитесь с автором через GitHub.

---
*Проект разработан с использованием .NET Framework и Visual Studio. Последнее обновление: август 2025.*
